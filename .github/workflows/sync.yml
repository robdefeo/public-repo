name: sync-repo
on:
    push:
        branches:
            - main

jobs:
    sync:
        name: Sync
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v3
              with:
                  fetch-depth: 0

            - name: Install git
              run: sudo apt update && echo Y | sudo apt install git

            - name: Configure git
              run: git config --global url."https://${{ secrets.ACCESS_TOKEN }}:x-oauth-basic@github.com/".insteadOf "https://github.com/"

            - name: Clone repo
              run: git clone https://github.com/zubeyiro/private-repo.git
            
            - name: List directory
              run: ls -all
